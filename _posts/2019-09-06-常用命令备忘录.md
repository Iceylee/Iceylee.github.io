---
layout:     post
title:      常用命令备忘录
subtitle:   
date:       2019-09-09
author:     琼脂糖
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
tags:
    - shell
    - R
    - python
---
[TOC]


## bash
### 文件操作
1. 命令
    `ls pwd cd mkdir`
    `less` /字符查询 n下翻
    `rm -rf` 文件夹名 （强制 recursively 删除文件）
    `echo "" > samples.json` 清空文件
    `rpm -qa |grep yum` 查看yum版本
    `whereis python` 目录下查找文件
    `find ./ |grep "A_A_A”`
    `find / -name libboost_iostreams.so.1.53.0 2>/dev/null`
     `find / -name librpm-4.3.so -type f` 查询文件
    `rm -fr !(file1)` 删除某个文件以外所有
    `rm -rf !(file1|file2)` 如果是多个要排除的，可以这样：
    `grep 'PB\.12\.1'` grep 句号
2. docker
    docker run -it centos:centos6.9 bash
3. 快速输入命令
    control A 行首 control E 行末
    option 箭头 移动一个单词
5. 
6. 

### 服务器
`top -u icey` 显示icey账户目前各个进程耗用的资源(CPU，内存)  
`free -h` 显示内存占用  
`du -h`  
`df -h`
uname -a
cat /etc/redhat-release
sar -r 1 3 查看内存使用率

### perl模块
1. perl模块的安装  
—perl -MCPAN -e shell  
—conda安装

2. 找perl 模块的位置  
perl -MTime::HiRes -e 'print $INC{"Time/HiRes.pm"}'  
perl -MYAML -e 'print $INC{"YAML.pm"}’  
perl -MHash::Merge -e 'print $INC{"Hash/Merge.pm"}'
### 其他
if [[ "$group" = "FvsM" || "$group" = "SvsF" ]]; then;fi
语句较复杂时，一般用双方括号；括号中均有空格。变量需用引号引用。
(head -n 1 temp && tail -n +2 temp3| sort -k1,1 -u) > ${group}_${gene}.tsv
除去首行，其他排序去重
 svn status |  grep '\!' | cut -d\  -f2-
-d specifies the delimeter (space), -f specifies the list of columns (all starting with the 2nd)


跳过前两列的sort
(head -n 2 test.file && tail -n +3 test.file | sort) > newfile

grep tab
ctrl+V tab

## 插件or编辑器
### sublime
1. 文本选择
ctrl cmd + 方向键 移动文本
cmd 选择多行 编辑
2. 智能选中
双击选中，三击选中整行，四击智能选中
1. 按住cmd
点击文件，文件夹，url可打开
可以拖拽选中的字符串
同时按住opt，可以矩形选中
1. tab面板管理
cmd+enter 最大化tab
1. 标记跳转
cmd+shift+m 设置标记
cmd+shift+j 跳转到上一个标记
cmd+shift+arrow 多个标记切换
1. 回放
cmd+opt+b 进入回放
方向键控制时间
退出回放：esc
1. 其他
自动填充：cmd+；
打开粘贴历史：cmd+shift+h
打开最近目录：cmd+alt+/


### vim
1. `set list` 查看特殊符号  ^I:制表符
2. 替换 `%s/aa/AA/g`
3. `set number`查看行号
### screen 
`screen -R` 项目名 #创建新任务窗口
`screen -r` 项目名 #进入该窗口
`screen -ls` 查看有哪些窗口
`command 1>log 2>&1` 运行存入log文件
`ctl+A+D` 暂时退出该窗口
`tail -f log` 实时查看log信息
### zsh
 ctrl+r 搜索历史命令
tar - tab 显示所有参数
kill - tab 
ls 方向键 显示用过的命令
cd ~ 在近期最近的几次路径切换
z 关键词 历史路径 

## ipython
%%writefile test.txt 创建新的文件写入

1. 蓝色cmd mode下快捷方式：  
B：下方插入新框  
A：上方插入新框  
DD：删除某cell
2. 查看函数tooltip：shift+tab
3. 魔术关键字（magic keywords），是用于控制 notebook 的特殊的命令。  
它们运行在代码单元中，以 % 或者 %% 开头，前者控制一行，后者控制整个单元。
- 得到代码运行的时间，则可以使用 %timeit；
- 在文档中显示 matplotlib 包生成的图形，则使用 % matplotlib inline；
- 代码调试，则使用 %pdb。但注意这些命令大多是在Python kernel 中适用的，

## python
脚本子进程
![image.png](https://upload-images.jianshu.io/upload_images/7901162-5244fb60fed469b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
```
import subprocess
with open("test.txt", "w") as outfile:
    subprocess.Popen(["ls","-l"], stdout=outfile.fileno())
```

import os.path
ref_name = os.path.basename(config["ref"]) # ref.fa

## R
R使用：
全局变量 用 <<-
sapply类，在函数内部需要用num <<- num + 1；否则，num值都是一样的

a$mean <- rowMeans(a[c('high', 'low')], na.rm=TRUE)
df中两列的均值
option 减号 直接打出 <-

colData.csv 定义好分组的先后顺序。
count.matrix的生成会来自colDData的顺序。
热图的顺序来自colData的顺序
A rule of thumb for the ‘kegg’ ID is entrezgene ID for eukaryote species and Locus ID for prokaryotes.
orgdb(包含kegg PATH信息，即ko04610这种）
SYMBOL 和 ENTREZID 是一一对应的（hsa）
ENSEMBL会多一些。 
